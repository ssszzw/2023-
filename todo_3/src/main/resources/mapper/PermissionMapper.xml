<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example20231016.todo_3.Mapper.PermissionMapper">

    <resultMap id="PermissionMap" type="com.example20231016.todo_3.Table.Permission">
        <id column="permission_id" property="permission_id" />
        <result column="permission_name" property="permission_name" />
        <result column="description" property="description" />
        <result column="module" property="module" />
        <result column="status" property="status" />
    </resultMap>

    <!--    <select id="getAllTasks" resultMap="PermissionMap">-->
    <!--        SELECT * FROM tasks-->
    <!--    </select>-->


    <select id="check" resultMap="PermissionMap">
        SELECT * FROM Permissions WHERE permission_id = #{permission_id}
    </select>

    <insert id="post" parameterType="com.example20231016.todo_3.Table.Permission">
        INSERT INTO Permissions (permission_name,description,module,status) VALUES (#{permission_name},#{description},#{module},#{status})
    </insert>
    <delete id="delete" parameterType="com.example20231016.todo_3.Table.Permission">
        DELETE FROM Permissions WHERE permission_id = #{permission_id}
    </delete>
    <insert id="put" parameterType="com.example20231016.todo_3.Table.Permission">
        UPDATE Permissions SET permission_name=#{permission_name}, description=#{description},status=#{status},module=#{module}WHERE permission_id=#{permission_id}
    </insert>
    <select id="getAllPermissions" resultMap="PermissionMap">
        SELECT * FROM Permissions
    </select>
    <select id="search" resultMap="PermissionMap" parameterType="com.example20231016.todo_3.Table.Permission">
        SELECT * FROM Permissions WHERE (permission_id=#{permission_id} OR #{permission_id}=0)
                                    AND (permission_name = #{permission_name} OR #{permission_name} ='')
                                    AND (description = #{description} OR #{description} ='')
    </select>


</mapper>